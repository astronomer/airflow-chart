---
suite: Test templates/webserver/webserver-deployment.yaml
templates:
  - templates/webserver/webserver-deployment.yaml
tests:
  - it: should work
    asserts:
      - isKind:
          of: Deployment
  - it: "should add extraContainer"
    set:
      executor: CeleryExecutor
      webserver:
        extraContainers:
          - name: test
            image: test/image:tag
            imagePullPolicy: IfNotPresent
    asserts:
      - contains:
          path: spec.template.spec.containers
          content:
            name: test
            image: test/image:tag
            imagePullPolicy: IfNotPresent
